================================================================================
  D√âPLOIEMENT API MOBILE NPVB v1 sur Free
================================================================================

üì¶ FICHIERS √Ä UPLOADER
----------------------
Uploader UNIQUEMENT le dossier "mobile-api/" √† la racine de votre FTP Free :

Racine FTP Free/
‚îî‚îÄ‚îÄ mobile-api/
    ‚îú‚îÄ‚îÄ v1/
    ‚îÇ   ‚îî‚îÄ‚îÄ index.php  (295 lignes, PHP 4 compatible)
    ‚îî‚îÄ‚îÄ README.md

URL finale : http://nantespvb.free.fr/mobile-api/v1/index.php


‚úÖ √âTAPES DE D√âPLOIEMENT
------------------------
1. Uploader le dossier "mobile-api/" via FTP (FileZilla, Cyberduck, etc.)

2. Tester l'API :
   Ouvrir : http://nantespvb.free.fr/mobile-api/v1/index.php

   Devrait afficher :
   {"success":true,"data":{"name":"NPVB API","version":"v1","status":"online","php":"4.4.3-dev"}}

3. Tester le login :
   curl -X POST -H "Content-Type: application/json" \
     -d '{"username":"VOTRE_PSEUDO","password":"VOTRE_MDP"}' \
     http://nantespvb.free.fr/mobile-api/v1/index.php?endpoint=auth/login

4. OPTIONNEL - Changer le secret token :
   √âditer ligne 70 de index.php :
   $TOKEN_SECRET = 'VOTRE_SECRET_UNIQUE';


üóëÔ∏è ANCIEN DOSSIER √Ä SUPPRIMER
------------------------------
Vous pouvez SUPPRIMER le dossier "api/" (bloqu√© par Free de toute fa√ßon)
Il contenait des fichiers PHP 5.3+ incompatibles avec PHP 4.


üì± MIGRATION APPS MOBILES iOS/Android
--------------------------------------
Mettre √† jour les URLs dans vos apps :

ANCIEN (flux_v3.php) :
  http://nantespvb.free.fr/app/flux_v3.php?type=connection
  http://nantespvb.free.fr/app/flux_v3.php?type=get_members
  http://nantespvb.free.fr/app/flux_v3.php?type=get_events
  etc.

NOUVEAU (mobile-api) :
  http://nantespvb.free.fr/mobile-api/v1/index.php?endpoint=auth/login
  http://nantespvb.free.fr/mobile-api/v1/index.php?endpoint=members
  http://nantespvb.free.fr/mobile-api/v1/index.php?endpoint=events
  etc.

CHANGEMENTS DANS LES R√âPONSES :
‚úì Toutes wrapp√©es dans {"success": true, "data": ...}
‚úì Login retourne un token (au lieu de juste [{"Pseudonyme":"..."}])
‚úì Format coh√©rent pour toutes les r√©ponses


üîß ENDPOINTS DISPONIBLES
-------------------------
AUTH :
  POST   /mobile-api/v1/index.php?endpoint=auth/login

MEMBERS :
  GET    /mobile-api/v1/index.php?endpoint=members
  GET    /mobile-api/v1/index.php?endpoint=members/{username}
  GET    /mobile-api/v1/index.php?endpoint=members/{username}/presences?status=o
  GET    /mobile-api/v1/index.php?endpoint=memberships

EVENTS :
  GET    /mobile-api/v1/index.php?endpoint=events
  GET    /mobile-api/v1/index.php?endpoint=events/{dateHeure}/{libelle}
  GET    /mobile-api/v1/index.php?endpoint=events/{dateHeure}/presences

PRESENCES :
  POST   /mobile-api/v1/index.php?endpoint=presences
  Body : {"dateHeure":"...","joueur":"...","libelle":"...","presence":"o|n|!"}

RESOURCES :
  GET    /mobile-api/v1/index.php?endpoint=resources/rules
  GET    /mobile-api/v1/index.php?endpoint=resources/competlib
  GET    /mobile-api/v1/index.php?endpoint=resources/ufolep


‚ú® AVANTAGES DE CETTE SOLUTION
-------------------------------
‚úì Compatible PHP 4.4.3 de Free (json_encode custom, mysql_*)
‚úì Architecture REST moderne malgr√© les limitations
‚úì Un seul fichier = facile √† maintenir
‚úì Compatible avec la DB existante (OLD_PASSWORD)
‚úì Gestion compl√®te des pr√©sences (inscription/capacit√©/absent)
‚úì Format JSON coh√©rent pour toutes les r√©ponses


‚ùå SUPPRESSION DE L'ANCIEN flux_v3.php
---------------------------------------
Une fois les apps mobiles mises √† jour et test√©es, vous pourrez supprimer :
  /app/flux_v3.php

Ne PAS le supprimer avant que les apps soient mises √† jour !


üìû SUPPORT
----------
En cas de probl√®me :
1. V√©rifier que PHP affiche bien "4.4.3-dev" sur la page d'accueil
2. Tester les endpoints un par un avec curl ou Postman
3. V√©rifier les credentials DB dans index.php ligne 66-70

================================================================================
